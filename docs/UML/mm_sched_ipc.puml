@startuml MM_Sched_IPC
title mexOS Microkernel: Memory, Scheduler, IPC

skinparam linetype ortho
skinparam package {
    BackgroundColor<<MM>> LightYellow
    BackgroundColor<<Scheduler>> LightCoral
    BackgroundColor<<IPC>> LightPink
    BorderColor Black
    Shadowing false
}

' ============================
' MEMORY MANAGEMENT
' ============================
package "Memory Management" <<MM>> {
    [heap.c]
    [heap.h]
    [pmm.c]
    [pmm.h]
    [vmm.c]
    [vmm.h]
}

' ============================
' SCHEDULER
' ============================
package "Scheduler" <<Scheduler>> {
    [sched.c]
    [sched.h]
    [switch.s]
}

' ============================
' IPC
' ============================
package "IPC" <<IPC>> {
    [ipc.c]
    [ipc.h]
}

' Dependencies to Core
[heap.c] --> [kernel.c]
[pmm.c] --> [kernel.c]
[vmm.c] --> [kernel.c]

[sched.c] --> [kernel.c]
[ipc.c] --> [kernel.c]

' Legend
legend right
| Color | Layer |
| LightYellow | Memory Management |
| LightCoral | Scheduler |
| LightPink | IPC |
endlegend

@enduml
